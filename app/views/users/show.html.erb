<h1><%= @user.name %></h1>


<div class="vehicle mx-0 w-100">
  <% if @user == current_user && @bookings.any? %>
    <% your = @user == current_user ? "Your" : ""  %>
    <h2 class="mb-3"><%= your %> Bookings</h2>
      <% @bookings.each do |booking| %>
        <div class="card-product">
          <%= cl_image_tag booking.vehicle.photos.first.key %>
          <div class="card-product-infos">
            <div class="d-flex justify-content-between align-items-center">
              <h3>
                <%= link_to booking.vehicle.name, vehicle_path(booking.vehicle) %>
              </h3>
              <p><%= booking.status %></p>
            </div>
            <p>Owner:
              <%= link_to booking.vehicle.user.name, user_path(booking.vehicle.user) %>
            </p>
            <p class="date">
              From: <strong><%= booking.start_date.strftime("%d/%m/%Y")%></strong> to: <strong><%= booking.end_date.strftime("%d/%m/%Y") %></strong>
            </p>

          </div>
        </div>
      <% end %>
  <% end %>
</div>
<div class="vehicle mx-0 w-100">
  <% if @user == current_user && @vehicle_bookings.any? %>
    <h2 class="mb-3">Bookings of your vehicles</h2>
      <% @vehicle_bookings.each do |booking| %>
        <div class="card-product h-100">
          <%= cl_image_tag booking.vehicle.photos.first.key %>
          <div class="card-product-infos">
            <h3>
              <%= link_to booking.vehicle.name, vehicle_path(booking.vehicle) %>
            </h3>
            <p>
              <%= link_to booking.user.name, user_path(booking.user) %>
            </p>
            <p class="date">
              From: <strong><%= booking.start_date.strftime("%d/%m/%Y")%></strong> to: <strong><%= booking.end_date.strftime("%d/%m/%Y") %></strong>
            </p>
            <p><%= booking.status %></p>
          </div>
            <div class="card-status">
              <%= link_to "accept", [booking, { booking: { status: 'accepted' }}], method: :patch, class: "btn btn-success btn-booking" %>
              <%= link_to "pending", [booking, { booking: { status: 'pending' }}], method: :patch, class: "btn btn-info btn-booking" %>
              <%= link_to "decline", [booking, { booking: { status: 'declined' }}], method: :patch, class: "btn btn-danger btn-booking" %>
            </div>
        </div>
      <% end %>
  <% end %>
</div>

<div class="vehicle mx-0 w-100">
  <% if @vehicles.any? %>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <% your = @user == current_user ? "Your" : ""  %>
        <h2><%= your %> Vehicles</h2>
        <div><%= link_to icon('fas', 'plus', class: 'strong'), new_vehicle_path %></div>
    </div>

    <div>
      <%= render 'shared/vehicles_grid' %>
    </div>
  <% end %>
</div>



