<div>
    <h1>Contacts</h1>
    <div>
        <%= form_for :users, :url => "/users/show",  :html => { :method => 'GET' } do |f| %>
            I am: <%= f.collection_select :ids, @users, :id, :name %> <br>
            <%= f.label "Who do you want to chat with?" %> <br>
            
            <% @users.each do |user| %>
                <%= radio_button_tag(:receiver_id, user.id) %>
                <%= label_tag(:name, user.name) %> <br>
            <% end %>

            <%= f.submit "Chat"%>
        <% end %>
    </div>
</div>

<div>
    <h2><%=@sender.name %> contacting <%=@receiver.name%></h2>
    <div id="messages">
        <% @messages.each do |message| %>
            <p><%= message.sender.name %>: <%= message.text %></p>
        <% end %>
    </div>
    
    <%= form_tag messages_path  do %>
        <div>
            <%= text_field_tag :message, nil ,  placeholder: 'Type message here...', class: 'form-control' %>
            <%= hidden_field_tag "receiver_id", @receiver.id %>
            <%= hidden_field_tag "sender_id", @sender.id %>
            <%= hidden_field_tag "chat_id", @chat_id %>
            <%= submit_tag "Send", data: { disable_with: false } %>
        </div>
    <% end %>
</div>